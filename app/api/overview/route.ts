import { NextResponse } from 'next/server';import { getPool } from '../../../lib/db';export async function GET(){try{const pool=getPool();const q=async(sql:string)=> (await pool.query(sql)).rows?.[0]?.count ?? '0';const suppliers=await q('SELECT COUNT(*) FROM supplier');const customers=await q('SELECT COUNT(*) FROM customer');const invoices=await q('SELECT COUNT(*) FROM invoice');return NextResponse.json({ok:true,counts:{suppliers,customers,invoices}});}catch(e:any){return NextResponse.json({ok:false,error:e.message},{status:500});}}
